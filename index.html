<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Happy Valentine's Day - ‡∏Å‡∏≠‡∏ü & ‡∏ó‡∏£‡∏≤‡∏¢</title>
    <link href="https://fonts.googleapis.com/css2?family=Mali:wght@400;500;600;700&family=Pacifico&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg-color: #ffffff; /* ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡∏ï‡∏≤‡∏°‡∏Ñ‡∏≥‡∏Ç‡∏≠ */
            --box-color: #ffffff;
            --text-main: #4a4a4a;
            --text-sub: #666666;
            --accent-pink: #ff8fab;
        }

        body {
            margin: 0; padding: 0;
            background: var(--bg-color);
            overflow: hidden;
            font-family: 'Mali', cursive; 
            width: 100vw; height: 100dvh; touch-action: none; position: fixed; color: #333;
        }

        #deco-layer { position: absolute; top:0; left:0; width:100%; height:100%; z-index: 0; pointer-events: none; overflow: hidden; }
        .floating-heart { position: absolute; bottom: -50px; font-size: 20px; opacity: 0.6; animation: floatUp linear infinite; }
        @keyframes floatUp { to { transform: translateY(-110vh) rotate(360deg); } }

        canvas {
            display: block; position: absolute; top: 0; left: 0; 
            z-index: 1; width: 100%; height: 100%;
            filter: saturate(1.5) brightness(1.1);
        }

        /* --- ‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏° --- */
        #start-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #fff;
            z-index: 999; display: flex; justify-content: center; align-items: center; 
            flex-direction: column; cursor: pointer; transition: opacity 0.8s ease;
        }
        
        .start-btn {
            padding: 15px 40px; border-radius: 50px;
            background: #ff8fab; color: #fff;
            font-family: 'Mali', cursive; font-size: 1.3rem; font-weight: 600;
            box-shadow: 0 5px 20px rgba(255, 143, 171, 0.4); 
            animation: pulseBtn 2s infinite; border: none;
        }
        @keyframes pulseBtn { 0% { transform: scale(1); } 50% { transform: scale(1.05); } 100% { transform: scale(1); } }

        /* --- ‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏ô‡∏û‡∏•‡∏∏ --- */
        #name-container {
            position: absolute; top: 12%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            z-index: 10; opacity: 0; pointer-events: none;
            transition: all 1.2s ease-out; width: 100%; text-align: center;
        }
        #name-container.visible { opacity: 1; transform: translate(-50%, -50%) scale(1); }

        .glowing-text {
            font-family: 'Mali', cursive; font-weight: 700;
            font-size: 2.8rem; color: #ff4d6d; 
            text-shadow: 0 0 10px rgba(255, 77, 109, 0.3);
            white-space: nowrap; margin: 0; letter-spacing: 1px;
        }

        /* --- ‡∏ï‡∏±‡∏ß‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤ --- */
        #love-timer-container {
            margin-top: 15px; display: inline-block;
            background: rgba(255, 143, 171, 0.1); padding: 8px 20px;
            border-radius: 20px; backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 143, 171, 0.2);
            text-align: center;
        }
        .timer-label { font-size: 0.9rem; color: #666; display: block; margin-bottom: 5px; }
        #love-timer { font-size: 1rem; color: #333; font-weight: 500; }
        .timer-highlight { font-weight: 700; color: #ff4d6d; }

        /* --- Puzzle --- */
        #puzzle-wrapper {
            position: absolute; top: 55%; left: 50%; transform: translate(-50%, -50%);
            z-index: 30; opacity: 0; pointer-events: none; transition: opacity 0.8s;
            display: flex; flex-direction: column; align-items: center;
            width: 85%; max-width: 300px;
            background: #fff; color: var(--text-main);
            padding: 20px; border-radius: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.1);
        }
        #puzzle-wrapper.active { opacity: 1; pointer-events: auto; }
        .puzzle-title { margin-bottom: 15px; font-size: 1rem; text-align: center; font-weight: 600;}
        #puzzle-board { display: grid; grid-template-columns: repeat(3, 1fr); gap: 2px; width: 240px; height: 300px; background: #f0f0f0; }
        .puzzle-piece { background-image: url('photo1.jpg'); background-size: 240px 300px; cursor: pointer; }
        .puzzle-piece.selected { outline: 3px solid var(--accent-pink); z-index: 5; }

        /* --- Content Box --- */
        #content-box {
            position: absolute; bottom: 0; left: 0; width: 100%; max-height: 80vh; min-height: 50%;
            z-index: 20; display: flex; flex-direction: column; align-items: center;
            padding-top: 25px; padding-bottom: 40px; opacity: 0; pointer-events: none;
            transform: translateY(50px); transition: all 1.5s cubic-bezier(0.25, 1, 0.5, 1);
            background: #ffffff; border-top-left-radius: 35px; border-top-right-radius: 35px;
            box-shadow: 0 -10px 50px rgba(0,0,0,0.1); overflow-y: auto; 
        }
        #content-box.visible { opacity: 1; transform: translateY(0); pointer-events: auto; }

        .title-msg { font-size: 1.5rem; color: #ff4d6d; font-weight: 700; margin-bottom: 10px; }
        .body-msg { font-size: 1rem; color: #666; text-align: center; line-height: 1.6; padding: 0 25px; white-space: pre-line; margin-bottom: 20px; }
        
        .photo-frame { padding: 10px 10px 40px 10px; background: #fff; box-shadow: 0 5px 20px rgba(0,0,0,0.1); width: 140px; height: 180px; transform: rotate(-3deg); margin-bottom: 15px; }
        .couple-photo { width: 100%; height: 100%; object-fit: cover; }

        .love-note-btn {
            padding: 12px 30px; background: linear-gradient(135deg, #ff9a9e 0%, #ff6a88 100%);
            border: none; border-radius: 30px; color: #fff; font-size: 1.1rem; font-weight: 600; font-family: 'Mali', cursive;
            cursor: pointer; box-shadow: 0 5px 15px rgba(255, 105, 180, 0.4); margin-bottom: 30px;
        }

        #note-popup {
            position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0.8);
            background: white; padding: 25px; border-radius: 20px; box-shadow: 0 10px 50px rgba(0,0,0,0.1);
            z-index: 100; opacity: 0; pointer-events: none; transition: all 0.3s; text-align: center; width: 80%; max-width: 280px; border: 3px solid #ff9a9e;
        }
        #note-popup.show { opacity: 1; transform: translate(-50%, -50%) scale(1); pointer-events: auto; }
        .note-text { font-size: 1.2rem; color: #ff6a88; font-weight: 700; }
    </style>
</head>
<body>
    <audio id="bg-music" loop><source src="song.mp3" type="audio/mpeg"></audio>
    <div id="deco-layer"></div>
    
    <div id="start-screen" onclick="startShow()">
        <div class="start-btn">‡πÅ‡∏ï‡∏∞‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏£‡∏±‡∏ö‡∏Ç‡∏≠‡∏á‡∏Ç‡∏ß‡∏±‡∏ç‡∏ß‡∏≤‡πÄ‡∏•‡∏ô‡πÑ‡∏ó‡∏ô‡πå üéÅ</div>
        <p style="color: #999; margin-top: 20px;">(‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡∏∞ üéµ)</p>
    </div>

    <canvas id="canvas"></canvas>
    
    <div id="name-container">
        <h1 class="glowing-text">‡∏Å‡∏≠‡∏ü üíó ‡∏ó‡∏£‡∏≤‡∏¢</h1>
        <div id="love-timer-container">
            <span class="timer-label">‡πÄ‡∏£‡∏≤‡∏£‡∏±‡∏Å‡∏Å‡∏±‡∏ô‡∏°‡∏≤‡∏ï‡∏±‡πâ‡∏á‡πÅ‡∏ï‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà 10/03/2019</span>
            <div id="love-timer">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ô‡∏±‡∏ö‡πÄ‡∏ß‡∏•‡∏≤‡πÅ‡∏´‡πà‡∏á‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∏‡∏Ç...</div>
        </div>
    </div>

    <div id="puzzle-wrapper">
        <div class="puzzle-title">‡∏ï‡πà‡∏≠‡∏à‡∏¥‡πä‡∏Å‡∏ã‡∏≠‡∏ß‡πå‡∏£‡∏π‡∏õ‡∏Ñ‡∏π‡πà‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ô‡∏∞ üß©</div>
        <div id="puzzle-board"></div>
    </div>

    <div id="content-box">
        <div class="title-msg">Happy Valentine's Day üåπ</div>
        <div class="body-msg">
            Happy valentine‚Äôs day ‡∏£‡∏±‡∏Å‡πÄ‡∏ó‡∏≠‡∏ô‡∏∞‚ô•Ô∏è

            ‡∏õ‡∏µ‡∏ô‡∏µ‡πâ 2026 ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏∞
            ‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô‡πÅ‡∏•‡∏∞‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÅ‡∏ö‡∏ö‡∏ô‡∏µ‡πâ‡πÄ‡∏™‡∏°‡∏≠
            ‡∏£‡∏±‡∏Å‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î‡πÄ‡∏•‡∏¢‡∏Ñ‡∏£‡∏±‡∏ö
        </div>
        <div class="photo-frame" onclick="nextPhoto()">
            <img src="photo1.jpg" id="slideshow-img" class="couple-photo">
        </div>
        <button class="love-note-btn" onclick="showNextNote()">üíå ‡∏Å‡∏î‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏Ñ‡∏¥‡∏î‡∏ñ‡∏∂‡∏á</button>
    </div>

    <div id="note-popup">
        <div class="note-text" id="note-content">...</div>
        <div style="font-size:0.8rem; color:#999; margin-top:15px;">(‡πÅ‡∏ï‡∏∞‡∏ó‡∏µ‡πà‡πÑ‡∏´‡∏ô‡∏Å‡πá‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏õ‡∏¥‡∏î)</div>
    </div>

    <script>
        // --- 1. ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏£‡∏±‡∏Å‡∏Å‡∏±‡∏ô (10 ‡∏°‡∏µ‡∏ô‡∏≤‡∏Ñ‡∏° 2019) ---
        const startDate = new Date("2019-03-10T00:00:00"); 

        function updateTimer() {
            const now = new Date();
            const diff = now - startDate;
            const days = Math.floor(diff / (1000 * 60 * 60 * 24));
            const hours = Math.floor((diff / (1000 * 60 * 60)) % 24);
            const minutes = Math.floor((diff / 1000 / 60) % 60);
            const seconds = Math.floor((diff / 1000) % 60);

            document.getElementById('love-timer').innerHTML = 
                `<span class="timer-highlight">${days}</span> ‡∏ß‡∏±‡∏ô 
                 <span class="timer-highlight">${hours}</span> ‡∏ä‡∏°. 
                 <span class="timer-highlight">${minutes}</span> ‡∏ô‡∏≤‡∏ó‡∏µ
                 <span class="timer-highlight">${seconds}</span> ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ`;
        }
        setInterval(updateTimer, 1000);

        // --- ‡∏£‡∏∞‡∏ö‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏° (‡πÄ‡∏£‡∏µ‡∏¢‡∏á‡∏•‡∏≥‡∏î‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏™‡∏±‡πà‡∏á) ---
        const loveNotes = [
            "‡πÄ‡∏ó‡∏≠‡πÄ‡∏Å‡πà‡∏á‡∏°‡∏≤‡∏Å‡∏ô‡∏∞ ‡∏£‡∏π‡πâ‡∏°‡∏±‡πâ‡∏¢",
            "‡∏£‡∏±‡∏Å‡πÄ‡∏ó‡∏≠‡∏ô‡∏£‡πâ‡∏≤",
            "‡∏™‡∏π‡πâ‡πÜ",
            "special person",
            "‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô"
        ];
        let noteIdx = 0;
        function showNextNote() {
            document.getElementById('note-content').innerText = loveNotes[noteIdx];
            document.getElementById('note-popup').classList.add('show');
            noteIdx = (noteIdx + 1) % loveNotes.length;
        }
        window.onclick = (e) => {
            if (e.target.id !== 'note-content' && !e.target.classList.contains('love-note-btn')) {
                document.getElementById('note-popup').classList.remove('show');
            }
        };

        // --- Puzzle ---
        function initPuzzle() {
            const board = document.getElementById('puzzle-board');
            let p = [];
            for(let i=0; i<9; i++) {
                let div = document.createElement('div');
                div.className = 'puzzle-piece';
                div.style.backgroundPosition = `-${(i%3)*80}px -${Math.floor(i/3)*100}px`;
                div.dataset.idx = i;
                div.onclick = () => {
                    if(sel) {
                        let tmp = div.style.backgroundPosition;
                        let tmpIdx = div.dataset.idx;
                        div.style.backgroundPosition = sel.style.backgroundPosition;
                        div.dataset.idx = sel.dataset.idx;
                        sel.style.backgroundPosition = tmp;
                        sel.dataset.idx = tmpIdx;
                        sel.classList.remove('selected'); sel = null;
                        if([...document.querySelectorAll('.puzzle-piece')].every((el,idx)=>el.dataset.idx==idx)) {
                            setTimeout(()=> {
                                document.getElementById('puzzle-wrapper').style.display='none';
                                document.getElementById('content-box').classList.add('visible');
                            }, 500);
                        }
                    } else { sel = div; div.classList.add('selected'); }
                };
                p.push(div);
            }
            p.sort(()=>Math.random()-0.5).forEach(el => board.appendChild(el));
        }
        let sel = null;

        // --- Fireworks ---
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");
        let cw = window.innerWidth, ch = window.innerHeight;
        canvas.width = cw; canvas.height = ch;

        class Particle {
            constructor(x, y, hue, isHeart=false, angle=null) {
                this.x = x; this.y = y;
                this.hue = hue;
                this.alpha = 1;
                this.decay = Math.random() * 0.015 + 0.01;
                if(isHeart) {
                    this.vx = Math.cos(angle) * Math.random() * 5;
                    this.vy = Math.sin(angle) * Math.random() * 5;
                } else {
                    this.angle = Math.random() * Math.PI * 2;
                    this.speed = Math.random() * 5 + 2;
                    this.vx = Math.cos(this.angle) * this.speed;
                    this.vy = Math.sin(this.angle) * this.speed;
                }
            }
            draw() {
                ctx.fillStyle = `hsla(${this.hue}, 100%, 70%, ${this.alpha})`;
                ctx.beginPath(); ctx.arc(this.x, this.y, 2, 0, Math.PI*2); ctx.fill();
            }
            update() { this.vx *= 0.95; this.vy *= 0.95; this.x += this.vx; this.y += this.vy; this.alpha -= this.decay; }
        }

        let particles = [];
        function createFirework(x, y, isHeart=false) {
            let hue = isHeart ? 0 : Math.random() * 360; // ‡∏´‡∏±‡∏ß‡πÉ‡∏à‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏µ‡πÅ‡∏î‡∏á/‡∏ä‡∏°‡∏û‡∏π
            let count = isHeart ? 150 : 50;
            for(let i=0; i<count; i++) {
                if(isHeart) {
                    let a = (i / count) * Math.PI * 2;
                    // ‡∏™‡∏π‡∏ï‡∏£‡∏™‡∏°‡∏Å‡∏≤‡∏£‡∏£‡∏π‡∏õ‡∏´‡∏±‡∏ß‡πÉ‡∏à
                    let r = 15;
                    let hx = r * 16 * Math.pow(Math.sin(a), 3);
                    let hy = -r * (13 * Math.cos(a) - 5 * Math.cos(2*a) - 2 * Math.cos(3*a) - Math.cos(4*a));
                    let p = new Particle(x, y, hue, true, 0);
                    p.vx = hx / 10 * (Math.random()*0.5 + 0.5);
                    p.vy = hy / 10 * (Math.random()*0.5 + 0.5);
                    particles.push(p);
                } else {
                    particles.push(new Particle(x, y, hue));
                }
            }
        }

        function loop() {
            ctx.fillStyle = 'rgba(255,255,255,0.2)'; // ‡∏´‡∏≤‡∏á‡∏û‡∏•‡∏∏‡∏ö‡∏ô‡∏û‡∏∑‡πâ‡∏ô‡∏Ç‡∏≤‡∏ß
            ctx.fillRect(0,0,cw,ch);
            particles.forEach((p, i) => {
                p.update(); p.draw();
                if(p.alpha <= 0) particles.splice(i, 1);
            });
            if(Math.random() < 0.03) createFirework(Math.random()*cw, Math.random()*ch*0.5);
            requestAnimationFrame(loop);
        }

        function startShow() {
            document.getElementById('start-screen').style.opacity = 0;
            setTimeout(()=> document.getElementById('start-screen').style.display='none', 800);
            document.getElementById('bg-music').play().catch(()=>{});
            loop();
            // ‡∏û‡∏•‡∏∏‡∏´‡∏±‡∏ß‡πÉ‡∏à‡∏•‡∏π‡∏Å‡πÉ‡∏´‡∏ç‡πà
            setTimeout(() => {
                createFirework(cw/2, ch*0.35, true);
                document.getElementById('name-container').classList.add('visible');
                setTimeout(initPuzzle, 2000);
                setTimeout(() => document.getElementById('puzzle-wrapper').classList.add('active'), 2500);
            }, 2000);
        }

        const photoList = ['photo1.jpg', 'photo2.jpg', 'photo3.jpg'];
        let photoIdx = 0;
        function nextPhoto() {
            photoIdx = (photoIdx + 1) % photoList.length;
            document.getElementById('slideshow-img').src = photoList[photoIdx];
        }
    </script>
</body>
</html>